<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<!--<iframe id="iframe" src="http://ec2-54-88-212-149.compute-1.amazonaws.com:18888/" style="height:400px;width:600px">-->
<iframe id="iframe" src="http://ec2-54-88-212-149.compute-1.amazonaws.com:18888/" style="height:400px;width:600px">
    <script>
        window.addEventListener('message', function(event) {
            alert('Received message: ' + event.data.message);
        }, false);
    </script>
</iframe>

<br/>

<button id="evoke-iframe-btn">Evoke</button>
<button id="reload-iframe-btn">Stop</button>
<button id="start-join-btn">Start</button>
</body>




<script src="../js/jquery-1.12.3.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script>
    $(document).ready(function () {
        var CONST = {
            SUPERNODE_URL: "http://52.90.181.29:9999",
            GET_LIVE_LIST_URL: "/allPrograms/",
            JOIN_LIVE_URL: "/join/",
            GET_LOCAL_NAME_URL: "/getLocalName/"
        };

        var btn = document.getElementById('evoke-iframe-btn')
        btn.onclick = function () {
            var frame = document.getElementById("iframe")
            frame.contentWindow.postMessage({message: 'Hello world'}, '*');
        }

        var btn2 = document.getElementById('reload-iframe-btn')
        btn2.onclick = function () {
            var frame = document.getElementById("iframe")
            frame.contentWindow.postMessage({command: 'stop'}, '*');
        }

        var btn3 = document.getElementById('start-join-btn')
        btn3.onclick = function () {
            $.ajax({
                url: CONST.GET_LOCAL_NAME_URL
            }).success(function (data) {
                console.log(data);
                var group = data;
                var frame = document.getElementById("iframe");
                frame.contentWindow.postMessage({command: 'start', groupid: group}, '*');
            }).error(function (data) {
                console.log(data);
            })
        }
    })
</script>

</html>